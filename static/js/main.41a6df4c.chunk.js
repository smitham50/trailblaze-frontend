(this["webpackJsonptrailblaze-frontend"]=this["webpackJsonptrailblaze-frontend"]||[]).push([[0],{110:function(e,a,t){"use strict";t.r(a);var n,r=t(0),s=t.n(r),l=t(18),c=t.n(l),o=(t(85),t(6)),i=t.n(o),u=t(7),m=t(17),d=t(10),p=t(13),f=t(9),h=t(14),g=t(8),b=t.n(g),v=(t(106),t(118)),E=t(11),y=t(16),k=t(121),O=t(117),S=t(112),w=t(41),j=t(37),x=function(e){alert(e.message)},N=function(e){navigator.geolocation.getCurrentPosition(e,x,{enableHighAccuracy:!0,timeout:5e3})},C=t(24),_=t(25),T=t(30),A=t(29),U=function(e){Object(T.a)(t,e);var a=Object(A.a)(t);function t(){return Object(C.a)(this,t),a.apply(this,arguments)}return Object(_.a)(t,[{key:"componentDidMount",value:function(){this.setTimer()}},{key:"setTimer",value:function(){null!=this._timer&&clearTimeout(this._timer),this._timer=setTimeout(function(){this.props.unmount(),this._timer=null}.bind(this),4e3)}},{key:"componentWillUnmount",value:function(){clearTimeout(this._timer)}},{key:"render",value:function(){return s.a.createElement("div",{className:"flash-message alert ".concat(this.props.alert)},s.a.createElement("p",{className:"small"},this.props.message))}}]),t}(r.Component),L=E.a.div(n||(n=Object(d.a)(["\n    .form-card {\n        width: 25rem;\n        padding: 1rem;\n    }\n    form {\n        width: 100%;\n    }\n    .flash-container {\n        position: relative;\n    }\n    .form-flash {\n        position: absolute;\n    }\n    .subtext {\n        font-family: Source Sans Pro, sans-serif;\n    }\n    .headline {\n        font-family: Amatic SC, cursive;\n    }\n    .btn-success {\n        background: #a7a7a7;\n        border-color: #8c8c8c;\n        &:hover {\n            background: #848383;\n        }\n    }\n"])));var M=Object(h.b)((function(e){var a=e.user.currentUserData,t=e.form;return{currentUserData:a,username:t.username,password:t.password,passwordConfirmation:t.passwordConfirmation,email:t.email,messages:t.messages,alert:t.alert,flashMessage:t.flashMessage}}),(function(e){return{setUser:function(a){e({type:"SET_USER",payload:a})},setLocation:function(a){e({type:"SET_LOCATION",payload:a})},setFlashMessage:function(a){e({type:"SET_FLASH_MESSAGE",payload:{alert:"alert-danger",messages:a}})},unmountFlashMessage:function(){e({type:"UNMOUNT_FLASH_MESSAGE"})},handleChange:function(a){e({type:"HANDLE_CHANGE",payload:Object(y.a)({},a.target.name,a.target.value)})}}}))((function(e){var a=e.currentUserData,t=e.username,n=e.password,r=e.passwordConfirmation,l=e.email,c=e.messages,o=e.alert,m=e.flashMessage,d=e.setUser,h=e.setLocation,g=e.setFlashMessage,v=e.unmountFlashMessage,E=e.handleChange,y=Object(w.b)(),x=y.handleSubmit,C=y.register,_=y.errors,T=function(){var e=Object(u.a)(i.a.mark((function e(){var a,s,c,o,u,m;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={method:"post",url:"https://nameless-wave-57808.herokuapp.com/api/v1/signup",data:{user:{username:t,password:n,password_confirmation:r,email:l}}},e.next=4,b()(a);case 4:s=e.sent,c=s.data,o=c.errors,u=c.user,m=s.data,o?g(o):(d(m),N(h),localStorage.userId=u.id);case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return s.a.createElement(L,null,s.a.createElement("div",{className:"flash-container"},m?c.map((function(e){return s.a.createElement(U,{key:e[0],unmount:v,message:e,alert:o,className:"subtext form-flash"})})):s.a.createElement("div",{className:"form-flash"})),s.a.createElement(k.a,{className:"form-card"},s.a.createElement(O.a,{onSubmit:x(T)},s.a.createElement(O.a.Group,{controlId:"username"},s.a.createElement(O.a.Label,{className:"headline"},"Username"),s.a.createElement(O.a.Control,{type:"text",placeholder:"Enter username",onChange:E,defaultValue:t,name:"username",className:"subtext",ref:C({required:"Username cannot be blank"})}),s.a.createElement(j.a,{errors:_,name:"username",render:function(e){var a=e.message;return s.a.createElement("p",{className:"alert-danger flash-message subtext"},a)}})),s.a.createElement(O.a.Group,{controlId:"formGroupEmail"},s.a.createElement(O.a.Label,{className:"headline"},"Email address"),s.a.createElement(O.a.Control,{type:"text",placeholder:"Enter email",onChange:E,defaultValue:l,name:"email",className:"subtext",ref:C({required:"Email cannot be blank",pattern:{value:/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,}$/i,message:"Invalid email address"}})}),s.a.createElement(j.a,{errors:_,name:"email",render:function(e){var a=e.message;return s.a.createElement("p",{className:"alert-danger flash-message subtext"},a)}})),s.a.createElement(O.a.Group,{controlId:"formGroupPassword"},s.a.createElement(O.a.Label,{className:"headline"},"Password"),s.a.createElement(O.a.Control,{type:"password",placeholder:"Password",onChange:E,defaultValue:n,name:"password",className:"subtext",ref:C({required:"Password cannot be blank",pattern:{value:/^(?=.*\d)(?=.*[a-z])(?=.*[A-Z]).{6,20}$/,message:"Password must be between 6 and 20 characters and contain at least one numeric digit, one uppercase and one lowercase letter"}})}),s.a.createElement(j.a,{errors:_,name:"password",render:function(e){var a=e.message;return s.a.createElement("p",{className:"alert-danger flash-message subtext"},a)}})),s.a.createElement(O.a.Group,{controlId:"formGroupPasswordConfirmation"},s.a.createElement(O.a.Label,{className:"headline"},"Password Confirmation"),s.a.createElement(O.a.Control,{type:"password",placeholder:"Password Confirmation",onChange:E,defaultValue:r,name:"passwordConfirmation",className:"subtext",ref:C({required:"Password confirmation cannot be blank",validate:function(e){return e===n||"Passwords must match"}})}),s.a.createElement(j.a,{errors:_,name:"passwordConfirmation",render:function(e){var a=e.message;return s.a.createElement("p",{className:"alert-danger flash-message subtext"},a)}})),s.a.createElement(O.a.Group,{controlId:"formGroupSubmit",className:"small headline"},s.a.createElement(S.a,{variant:"success",type:"submit",block:!0},"Submit")),s.a.createElement(O.a.Group,{className:"small subtext"},"Already have an account?  ",s.a.createElement(p.b,{to:"/login"},"Login")))),a&&a.logged_in?s.a.createElement(f.a,{to:"/trailsearch"}):null)}));var G=Object(h.b)((function(e){var a=e.user.currentUserData,t=e.form;return{currentUserData:a,username:t.username,password:t.password,messages:t.messages,alert:t.alert,flashMessage:t.flashMessage}}),(function(e){return{setUser:function(a){e({type:"SET_USER",payload:a})},setLocation:function(a){e({type:"SET_LOCATION",payload:a})},setFlashMessage:function(a){e({type:"SET_FLASH_MESSAGE",payload:{alert:"alert-danger",messages:a}})},unmountFlashMessage:function(){e({type:"UNMOUNT_FLASH_MESSAGE"})},handleChange:function(a){e({type:"HANDLE_CHANGE",payload:Object(y.a)({},a.target.name,a.target.value)})}}}))((function(e){var a=e.currentUserData,t=e.username,n=e.password,r=e.messages,l=e.alert,c=e.flashMessage,o=e.setUser,m=e.setLocation,d=e.setFlashMessage,h=e.unmountFlashMessage,g=e.handleChange,v=Object(w.b)(),E=v.handleSubmit,y=v.register,x=v.errors,C=function(){var e=Object(u.a)(i.a.mark((function e(){var a,r,s,l,c,u;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={method:"post",url:"https://nameless-wave-57808.herokuapp.com/api/v1/login",data:{user:{username:t,password:n}}},e.next=4,b()(a);case 4:r=e.sent,s=r.data,l=s.errors,c=s.user,u=r.data,l?d(l):(o(u),N(m),localStorage.userId=c.id);case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return s.a.createElement(L,null,s.a.createElement("div",{className:"flash-container"},c?r.map((function(e){return s.a.createElement(U,{key:e[0],unmount:h,message:e,alert:l,className:"subtext form-flash"})})):s.a.createElement("div",{className:"form-flash"})),s.a.createElement(k.a,{className:"form-card"},s.a.createElement(O.a,{onSubmit:E(C)},s.a.createElement(O.a.Group,{controlId:"username"},s.a.createElement(O.a.Label,{className:"headline"},"Username"),s.a.createElement(O.a.Control,{type:"text",placeholder:"Enter username",onChange:g,name:"username",defaultValue:t,className:"subtext",ref:y({required:"Username cannot be blank"})}),s.a.createElement(j.a,{errors:x,name:"username",render:function(e){var a=e.message;return s.a.createElement("p",{className:"alert-danger flash-message subtext"},a)}})),s.a.createElement(O.a.Group,{controlId:"formGroupPassword"},s.a.createElement(O.a.Label,{className:"headline"},"Password"),s.a.createElement(O.a.Control,{type:"password",placeholder:"Password",onChange:g,name:"password",defaultValue:n,className:"subtext",ref:y({required:"Password cannot be blank"})}),s.a.createElement(j.a,{errors:x,name:"password",render:function(e){var a=e.message;return s.a.createElement("p",{className:"alert-danger flash-message subtext"},a)}})),s.a.createElement(O.a.Group,{controlId:"formGroupSubmit",className:"small headline"},s.a.createElement(S.a,{variant:"success",type:"submit",block:!0},"Submit")),s.a.createElement(O.a.Group,{className:"small subtext"},"Don't have an account?  ",s.a.createElement(p.b,{to:"/signup"},"Signup")))),a&&a.logged_in?s.a.createElement(f.a,{to:"/trailsearch"}):null)}));var H,D=Object(h.b)((function(e){return{currentUserData:e.user.currentUserData}}),null)((function(e){var a=e.currentUserData.user,t=Object(r.useState)(""),n=Object(m.a)(t,2),l=n[0],c=n[1],o=Object(r.useState)(""),d=Object(m.a)(o,2),p=d[0],f=d[1],h=Object(r.useState)(!1),g=Object(m.a)(h,2),v=g[0],E=g[1],y=Object(r.useState)(""),w=Object(m.a)(y,2),j=w[0],x=w[1],N=Object(r.useState)(""),C=Object(m.a)(N,2),_=C[0],T=C[1];window.setUsername=c,window.setEmail=f;var A=function(){var e=Object(u.a)(i.a.mark((function e(t){var n,r,s;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),n={user:{username:l||a.username,email:p||a.email}},r={method:"patch",url:"https://nameless-wave-57808.herokuapp.com/api/v1/update_account",data:n},e.next=5,b()(r);case 5:(s=e.sent).data.error?(E(!0),T(s.data.message),x("alert-danger")):(E(!0),T(s.data.message),x("alert-success"));case 7:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}(),M=function(e){var a=e.target.name;(0,window["set".concat(a)])(e.target.value)};return s.a.createElement(L,null,s.a.createElement(k.a,{className:"form-card"},s.a.createElement(O.a,{onSubmit:A},s.a.createElement(O.a.Group,null,v?s.a.createElement(U,{unmount:function(){E(!1),T("")},message:_,alert:j,className:"subtext"}):s.a.createElement("span",null)),s.a.createElement(O.a.Group,{controlId:"username"},s.a.createElement(O.a.Label,{className:"headline"},"Update username"),s.a.createElement(O.a.Control,{type:"text",placeholder:"".concat(null===a||void 0===a?void 0:a.username),onChange:M,name:"Username",className:"subtext",value:l})),s.a.createElement(O.a.Group,{controlId:"formGroupEmail"},s.a.createElement(O.a.Label,{className:"headline"},"Update email address"),s.a.createElement(O.a.Control,{type:"text",placeholder:"".concat(null===a||void 0===a?void 0:a.email),onChange:M,name:"Email",className:"subtext",value:p})),s.a.createElement(O.a.Group,{controlId:"formGroupSubmit",className:"small headline"},s.a.createElement(S.a,{variant:"success",type:"submit",block:!0},"Submit")))))})),I=t(113),P=t(76),F=t(116),R=function(e){var a=Object(r.useState)(!1),t=Object(m.a)(a,2),n=t[0],l=t[1],c=function(){return l(!1)};Object(r.useEffect)((function(){l(!0)}),[]);return s.a.createElement(r.Fragment,null,s.a.createElement(F.a,{show:n,onHide:c},s.a.createElement(F.a.Header,{closeButton:!0},s.a.createElement(F.a.Title,null,"Cancel Account")),s.a.createElement(F.a.Body,{className:"subtext"},e.message),s.a.createElement(F.a.Footer,null,s.a.createElement(S.a,{variant:"secondary",className:"headline",onClick:c},"No"),s.a.createElement(S.a,{variant:"primary",className:"headline",onClick:function(){e.handleCancelAccount(),c()}},"Yes"))))},z=Object(E.a)(I.a)(H||(H=Object(d.a)(["\n    & a:link, a:visited {\n        color:  #1c1b1be1;\n    }\n    & a:hover {\n        color:  #7d7a7ae1;\n    }\n    & .headline {\n        font-family: 'Amatic SC', cursive;\n    }\n    & .marginal {\n        margin: 2%;\n    }\n    & .button-sized {\n        font-size: 1.2em;\n    }\n"])));var K,V,B,q=Object(f.g)(Object(h.b)(null,(function(e){return{clearUser:function(){e({type:"CLEAR_USER"})}}}))((function(e){var a=Object(r.useState)(!1),t=Object(m.a)(a,2),n=t[0],l=t[1],c=Object(r.useState)(""),o=Object(m.a)(c,2),d=o[0],f=o[1],h=function(){var a=Object(u.a)(i.a.mark((function a(){return i.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return localStorage.clear(),e.clearUser(),a.next=4,b.a.delete("https://nameless-wave-57808.herokuapp.com/api/v1/cancel_account");case 4:a.sent.errors||e.history.push("/");case 6:case"end":return a.stop()}}),a)})));return function(){return a.apply(this,arguments)}}();return s.a.createElement(s.a.Fragment,null,n?s.a.createElement(R,{handleCancelAccount:h,message:d}):null,s.a.createElement(z,{className:"container-fluid"},s.a.createElement(P.a,{xs:6},s.a.createElement(p.b,{to:"/update-account",className:"headline"},s.a.createElement("i",{className:"fas fa-edit fa-3x marginal"}),s.a.createElement("p",{className:"button-sized"},"Update Account"))),s.a.createElement(P.a,{xs:6},s.a.createElement(p.b,{to:"#",onClick:function(){f("Are you sure you want to cancel your account?"),l(!0)},className:"headline"},s.a.createElement("i",{className:"fas fa-ban fa-3x marginal"}),s.a.createElement("p",{className:"button-sized"},"Cancel Account")))))}))),W=t(119),Z=E.a.div(K||(K=Object(d.a)(["\n    .navbar-link {\n        text-decoration: none;\n    }\n    .navbar-dark .navbar-nav .nav-link {\n        color: white;\n        transition: .3s;\n    }\n    a {\n        margin: 0 1em;\n    }\n"]))),Y=Object(E.a)(W.a.Brand)(V||(V=Object(d.a)(["\n    font-size: 1.7em;\n    font-weight: 700;\n    font-family: Balsamiq Sans, cursive;\n"]))),$=E.a.img(B||(B=Object(d.a)(["\n    height: 50px;\n    width: 50px;\n"])));var J,X,Q,ee,ae=Object(h.b)((function(e){var a=e.user;return{currentUserData:a.currentUserData,latitude:a.latitude,longitude:a.longitude}}),(function(e){return{clearUser:function(){e({type:"CLEAR_USER"})}}}))((function(e){var a=function(){var a=Object(u.a)(i.a.mark((function a(){var t;return i.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return localStorage.clear(),a.next=3,b.a.post("https://nameless-wave-57808.herokuapp.com/api/v1/logout");case 3:(t=a.sent).errors?alert(t.errors):e.clearUser();case 5:case"end":return a.stop()}}),a)})));return function(){return a.apply(this,arguments)}}();return s.a.createElement(Z,null,s.a.createElement(W.a,{bg:"dark",variant:"dark",expand:"lg",fixed:"top",collapseOnSelect:!0},s.a.createElement(v.a.Link,{as:p.b,eventKey:"1",to:"/"},s.a.createElement(Y,null,s.a.createElement($,{src:"/trailblaze-frontend/noun_Trail_2056927.svg",alt:"brand",loading:"lazy"}),"   Trailblaze")),s.a.createElement(W.a.Toggle,{"aria-controls":"basic-navbar-nav"}),s.a.createElement(W.a.Collapse,{id:"basic-navbar-nav"},s.a.createElement(v.a,{className:"ms-auto"},e.currentUserData.logged_in?s.a.createElement(s.a.Fragment,null,s.a.createElement(v.a.Link,{as:p.b,eventKey:"2",to:"/trailsearch"},"Find a Trail"),s.a.createElement(v.a.Link,{as:p.b,eventKey:"3",to:"/myhikes"},"My Favorite Hikes"),s.a.createElement(v.a.Link,{as:p.b,eventKey:"4",to:"/account"},"Account"),s.a.createElement(v.a.Link,{as:p.b,eventKey:"5",to:"/",onClick:a},"Logout ",e.currentUserData.user.username)):s.a.createElement(s.a.Fragment,null,s.a.createElement(v.a.Link,{as:p.b,eventKey:"6",to:"/signup"},"Signup"),s.a.createElement(v.a.Link,{as:p.b,eventKey:"7",to:"/login"},"Login"))))))})),te=t(114),ne=E.a.div(J||(J=Object(d.a)(["\n    position: relative;\n    display: inline-block;\n"]))),re=E.a.img(X||(X=Object(d.a)(["\n    width: 100%;\n    vertical-align: top;\n"]))),se=E.a.div(Q||(Q=Object(d.a)(["\n    position: absolute;\n    top: 2em;\n    left: 0;\n    right: 0;\n    bottom: 0;\n    color: white;\n    & .headline {\n        font-size: .9em;\n        font-family: Amatic SC, cursive;\n    }\n    & .subtext {\n        font-family: 'Source Sans Pro', sans-serif;\n        font-size: .6em;\n    }\n"]))),le=function(e){var a=Object(r.useState)(0),t=Object(m.a)(a,2),n=t[0],l=t[1],c=Object(r.useRef)(null);Object(r.useEffect)((function(){try{c.current.addEventListener("load",o)}catch(e){console.log(e)}}),[]);var o=function(){var e=c.current.clientHeight,a=Math.ceil(e/10);l(a)};return s.a.createElement(p.b,{to:"/trails/".concat(encodeURIComponent(e.trailName)),style:{gridRowEnd:"span ".concat(n)}},s.a.createElement(ne,{className:"trail"},s.a.createElement(re,{src:e.image,ref:c,alt:e.trailName}),s.a.createElement(se,null,s.a.createElement("p",{className:"headline"},s.a.createElement("strong",null,e.trailName)),s.a.createElement("p",{className:"subtext"},e.location))))},ce=E.a.div(ee||(ee=Object(d.a)(["\n    display: grid;\n    grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));\n    grid-gap: 0 10px;\n    grid-auto-rows: 10.1px;\n    width: 100%;\n    margin-bottom: 1rem;\n"]))),oe=function(e){Object(T.a)(t,e);var a=Object(A.a)(t);function t(){var e;Object(C.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(e=a.call.apply(a,[this].concat(r))).renderTrails=function(){return e.props.trails.map((function(e){return s.a.createElement(le,{key:e.id,trailName:e.name,image:e.imgMedium,length:e.length,difficulty:e.difficulty,location:e.location})}))},e}return Object(_.a)(t,[{key:"componentDidMount",value:function(){var e=Object(u.a)(i.a.mark((function e(){var a,t,n,r;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.props.trails.length){e.next=8;break}return t={method:"post",url:"https://nameless-wave-57808.herokuapp.com/api/v1/search_reload",data:{trail_ids:null===(a=localStorage.trails)||void 0===a?void 0:a.split(",").map((function(e){return e}))}},e.next=4,b()(t);case 4:n=e.sent,r=n.data.trails,(0,this.props.setTrails)(r);case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this.props,a=e.trails,t=e.setPreviousPage,n=e.location,r=this.renderTrails;return t(n),s.a.createElement(s.a.Fragment,null,a.length?s.a.createElement(ce,null,r()):s.a.createElement(te.a,{animation:"border",role:"status"},s.a.createElement("span",{className:"sr-only"},"Searching for trails")))}}]),t}(r.PureComponent);var ie=Object(f.g)(Object(h.b)((function(e){var a=e.user;return{latitude:a.latitude,longitude:a.longitude,trails:e.trailSearch.trails}}),(function(e){return{setTrails:function(a){e({type:"SET_TRAILS",payload:a})},setPreviousPage:function(a){e({type:"SET_PREVIOUS_PAGE",payload:a})}}}))(oe)),ue=t(120),me=t(79),de=function(e){Object(T.a)(t,e);var a=Object(A.a)(t);function t(){var e;Object(C.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(e=a.call.apply(a,[this].concat(r))).state={center:{lat:parseFloat(e.props.trail.latitude),lng:parseFloat(e.props.trail.longitude)},zoom:11,key:"",directions:null},e.handleDirections=function(a){var t={lat:parseFloat(localStorage.latitude),lng:parseFloat(localStorage.longitude)},n={lat:e.state.center.lat,lng:e.state.center.lng},r=new a.maps.DirectionsService,s=new a.maps.DirectionsRenderer;s.setMap(a.map),r.route({travelMode:"DRIVING",origin:t,destination:n},(function(e,a){"OK"===a&&s.setDirections(e)}))},e}return Object(_.a)(t,[{key:"componentDidMount",value:function(){var e=Object(u.a)(i.a.mark((function e(){var a;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,b()("https://nameless-wave-57808.herokuapp.com/api/v1/map_auth");case 2:a=e.sent,this.setState({key:a.data.key.replace(/\s/g,"")});case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this.state,a=e.key,t=e.center,n=e.zoom;return s.a.createElement("div",{className:"map"},a?s.a.createElement(me.a,{bootstrapURLKeys:{key:a},center:t,defaultZoom:n,onGoogleApiLoaded:this.handleDirections,yesIWantToUseGoogleMapApiInternals:!0}):null)}}]),t}(r.PureComponent);var pe,fe,he,ge=Object(h.b)((function(e){return{trail:e.trailShow.trail}}),null)(de),be=E.a.div(pe||(pe=Object(d.a)(["\n    width: 100%;\n"]))),ve=E.a.div(fe||(fe=Object(d.a)(["\n    margin-bottom: 1vh;\n    & > * {\n        margin: 0 .5%;\n    }\n    & .flash-message {\n        font-size: .6em;\n        display: block;\n        color: rgba(91, 87, 87, 0.544);\n    }\n    & .btn-link {\n        margin: .5%;\n    }\n"]))),Ee=E.a.div(he||(he=Object(d.a)(["\n    padding-left: 1%;\n    padding-right: 1%;\n    display: flex;\n    flex-wrap: wrap;\n    width: 100%;\n    & .trail {\n        flex: 0 450px;\n    }\n    & .trail img {\n        max-height: 45vh;\n    }\n    & .map {\n        height: 65vh;\n        flex: 1 1 450px;\n    }\n"]))),ye=function(e){Object(T.a)(t,e);var a=Object(A.a)(t);function t(){var e;Object(C.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(e=a.call.apply(a,[this].concat(r))).state={inHikes:!1,trailSet:!1},e.addTrailToHikes=Object(u.a)(i.a.mark((function a(){var t,n,r,s,l,c,o,u,m,d,p;return i.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return t=e.props,n=t.match.params,r=t.currentUserData,a.next=3,b.a.post("https://nameless-wave-57808.herokuapp.com/api/v1/my_hikes/add_hike",{user_id:r.user.id,trail_name:n.slug});case 3:s=a.sent,l=s.data,c=l.trail,o=l.error,u=l.status,m=e.props.setFlashMessage,"success"===u?("alert-success",d="".concat(c," added to favorites"),m([d],"alert-success"),e.setState({inHikes:!0})):("alert-danger",p="".concat(o),m([p],"alert-danger"));case 7:case"end":return a.stop()}}),a)}))),e.removeTrailFromHikes=Object(u.a)(i.a.mark((function a(){var t,n,r,s,l,c,o;return i.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,b.a.delete("https://nameless-wave-57808.herokuapp.com/api/v1/my_hikes/delete_hike/".concat(e.props.trail.id));case 2:t=a.sent,n=t.data.error,r=e.props,s=r.trail,l=r.setFlashMessage,n?("alert-danger",o="".concat(n),l([o],"alert-danger")):("alert-success",c="".concat(s.name," removed from your hikes"),l([c],"alert-success"),e.setState({inHikes:!1}));case 6:case"end":return a.stop()}}),a)}))),e.renderFlashMessage=function(){var a=e.props,t=a.messages,n=a.alert,r=a.unmountFlashMessage;return t.map((function(e){return s.a.createElement(U,{key:e[0],unmount:r,message:e,alert:n,className:"subtext form-flash"})}))},e.backToPreviousPage=function(){},e}return Object(_.a)(t,[{key:"componentDidMount",value:function(){var e=Object(u.a)(i.a.mark((function e(){var a,t,n,r,s=this;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,b.a.get("https://nameless-wave-57808.herokuapp.com/api/v1/my_hikes").then((function(e){s.props.setHikes(e.data.hikes)}));case 2:a=this.props,t=a.match.params,n=a.setTrail,r=a.hikes,b.a.get("https://nameless-wave-57808.herokuapp.com/api/v1/trails/".concat(t.slug)).then((function(e){var a=e.data.trail;n(a),s.setState({trailSet:!0}),r.find((function(e){return e.id===a.id}))&&s.setState({inHikes:!0})}));case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this.props,a=e.trail,t=e.flashMessage,n=e.fromSearchPage,r=this.state,l=r.inHikes,c=r.trailSet,o=this.addTrailToHikes,i=this.removeTrailFromHikes,u=this.renderFlashMessage;return a?s.a.createElement(be,null,s.a.createElement(ve,{className:"d-flex"},n?s.a.createElement(S.a,{variant:"link",className:"headline"},s.a.createElement(p.b,{to:"/trails"},"Back to search")):s.a.createElement(S.a,{variant:"link",className:"headline"},s.a.createElement(p.b,{to:"/myhikes"},"Back to hikes")),l?s.a.createElement(S.a,{variant:"link",onClick:i,className:"headline"},"Remove from favorite hikes"):s.a.createElement(S.a,{variant:"link",onClick:o,className:"headline"},"Add to favorite hikes"),t?u():s.a.createElement("span",null)),s.a.createElement(Ee,null,s.a.createElement(ue.a,{className:"trail"},s.a.createElement(ue.a.Image,{src:a.imgMedium}),s.a.createElement(ue.a.Caption,{className:"headline"},a.name),s.a.createElement(ue.a.Caption,{className:"subtext small"},"Length: ",a.length," miles"),s.a.createElement(ue.a.Caption,{className:"subtext small"},"Difficulty: ",a.difficulty),s.a.createElement(ue.a.Caption,{className:"subtext small"},"Location: ",a.location)),c?s.a.createElement(ge,null):null)):null}}]),t}(r.PureComponent);var ke=Object(f.g)(Object(h.b)((function(e){var a=e.user.currentUserData,t=e.trailShow,n=t.trail,r=t.fromSearchPage,s=e.myHikes.hikes,l=e.form;return{currentUserData:a,trail:n,hikes:s,messages:l.messages,alert:l.alert,flashMessage:l.flashMessage,fromSearchPage:r}}),(function(e){return{setTrail:function(a){e({type:"SET_TRAIL",payload:a})},setHikes:function(a){e({type:"SET_HIKES",payload:a})},setFlashMessage:function(a,t){e({type:"SET_FLASH_MESSAGE",payload:{alert:t,messages:a}})},unmountFlashMessage:function(){e({type:"UNMOUNT_FLASH_MESSAGE"})}}}))(ye)),Oe=function(e){Object(T.a)(t,e);var a=Object(A.a)(t);function t(){var e;Object(C.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(e=a.call.apply(a,[this].concat(r))).state={loaded:!1,loading:!1},e.associateUserTrails=Object(u.a)(i.a.mark((function a(){var t,n,r,s,l,c;return i.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return t=e.props,n=t.distance,r=t.latitude,s=t.longitude,a.prev=1,l="https://www.hikingproject.com/data/get-trails?lat=".concat(r,"&lon=").concat(s,"&maxDistance=").concat(n,"&maxResults=300&key=200492212-d7400571b0620563169df18724f8dc46"),c={method:"post",url:"https://nameless-wave-57808.herokuapp.com/api/v1/trails/associate_trails",data:{url:l}},e.setState({loading:!0}),a.next=7,b()(c);case 7:"Success"===a.sent.data.status&&e.setState({loading:!1}),a.next=14;break;case 11:a.prev=11,a.t0=a.catch(1),console.log(a.t0);case 14:case"end":return a.stop()}}),a,null,[[1,11]])}))),e.handleSearch=function(){var a=Object(u.a)(i.a.mark((function a(t){var n,r,s,l,c,o,u,m;return i.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return t.preventDefault(),n=e.props,r=n.distance,s=n.latitude,l=n.longitude,c=n.mileage,o=n.setTrails,u={method:"post",url:"https://nameless-wave-57808.herokuapp.com/api/v1/trails/search",data:{distance:r,mileage:c,latitude:s,longitude:l}},a.next=5,b()(u);case 5:m=a.sent,o(m.data.trails),e.setState({loaded:!0});case 8:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}(),e}return Object(_.a)(t,[{key:"componentDidUpdate",value:function(e){this.props.latitude!==e.latitude&&this.associateUserTrails()}},{key:"render",value:function(){var e=this.props,a=e.latitude,t=e.longitude,n=e.distance,r=e.handleChange,l=e.mileage;return s.a.createElement(L,null,a&&t&&!this.state.loading?s.a.createElement(k.a,{className:"form-card"},s.a.createElement(O.a,{onSubmit:this.handleSearch},s.a.createElement(O.a.Label,{className:"headline"},"How many miles are you willing to travel from your current location?"),s.a.createElement(O.a.Group,{controlId:"distance"},s.a.createElement(O.a.Control,{as:"select",name:"distance",value:n,onChange:r,className:"subtext"},s.a.createElement("option",null,"60"),s.a.createElement("option",null,"100"),s.a.createElement("option",null,"150"))),s.a.createElement(O.a.Label,{className:"headline"},"How many miles do you want to hike?"),s.a.createElement(O.a.Group,{controlId:"mileage"},s.a.createElement(O.a.Control,{as:"select",name:"mileage",value:l,onChange:r,className:"subtext"},s.a.createElement("option",null,"Less than 3"),s.a.createElement("option",null,"3 to 5"),s.a.createElement("option",null,"6 to 9"))),s.a.createElement(O.a.Group,{controlId:"formGroupSubmit",className:"headline"},s.a.createElement(S.a,{variant:"success",type:"submit",block:!0},"Find Trails")),this.state.loaded?s.a.createElement(f.a,{to:"/trails"}):null)):s.a.createElement(s.a.Fragment,null,s.a.createElement(te.a,{animation:"border",role:"status"}),s.a.createElement("p",{className:"headline"},"Processing location. If this is your first login it may take a minute...")))}}]),t}(r.PureComponent);var Se=Object(h.b)((function(e){var a=e.user,t=a.currentUserData,n=a.latitude,r=a.longitude,s=e.trailSearch;return{currentUserData:t,latitude:n,longitude:r,distance:s.distance,mileage:s.mileage,trails:s.trails}}),(function(e){return{handleChange:function(a){e({type:"HANDLE_CHANGE",payload:Object(y.a)({},a.target.name,a.target.value)})},setTrails:function(a){e({type:"SET_TRAILS",payload:a})}}}))(Oe);var we,je,xe,Ne,Ce,_e,Te,Ae=Object(f.g)(Object(h.b)((function(e){return{hikes:e.myHikes.hikes}}),(function(e){return{setHikes:function(a){e({type:"SET_HIKES",payload:a})},setPreviousPage:function(a){e({type:"SET_PREVIOUS_PAGE",payload:a})}}}))((function(e){var a=e.setHikes;(0,e.setPreviousPage)(e.location);var t=function(){var e=Object(u.a)(i.a.mark((function e(){var t;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,b.a.get("https://nameless-wave-57808.herokuapp.com/api/v1/my_hikes");case 2:t=e.sent,a(t.data.hikes);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();Object(r.useEffect)((function(){t()}),[]);return s.a.createElement(ce,null,function(){var a;return null===(a=e.hikes)||void 0===a?void 0:a.map((function(e){var a=e.id,t=e.name,n=e.length,r=e.difficulty,l=e.location,c=e.imgMedium;return s.a.createElement(le,{key:a,trailName:t,image:c,length:n,difficulty:r,location:l})}))}())}))),Ue=t(115),Le=Object(E.b)(we||(we=Object(d.a)(["\n    0% {\n        opacity: 0;\n        transform: translateY(4rem);\n    }\n    80% {\n        opacity: .80;\n        transform: translateY(-1rem);\n    }\n    100% {\n        opacity: 1;\n    }\n"]))),Me=Object(E.a)(Ue.a)(je||(je=Object(d.a)(["\n    color: white;\n    background-image: url(",");\n    background-position-y: -172rem;\n    background-position-x: -119rem;\n    height: 70vh;\n    padding-top: 13rem;\n    margin-bottom: 1rem;\n    @media screen and (max-width: 768px) {\n        background-position-y: -22rem;\n        background-position-x: -40rem;\n    }\n"])),"/trailblaze-frontend/trail.jpeg"),Ge=E.a.h1(xe||(xe=Object(d.a)(["\n    font-family: Amatic SC, cursive;\n    font-size: 3.5rem;\n    width: 100vw;\n    letter-spacing: .7rem;\n    animation: 1s "," ease-in;\n    @media screen and (max-width: 768px) {\n        font-size: 2.2rem;\n    }\n"])),Le),He=function(){return s.a.createElement(Me,null,s.a.createElement(Ge,null,"Welcome to Trailblaze"))},De=E.a.div(Ne||(Ne=Object(d.a)(["\n  text-align: center;\n  & .btn:focus {\n    outline: none;\n    box-shadow: none;\n  }\n  & .headline {\n    font-family: 'Amatic SC', cursive;\n  }\n  & .subtext {\n    font-family: 'Source Sans Pro', sans-serif;\n  }\n"]))),Ie=E.a.div(Ce||(Ce=Object(d.a)(["\n  display: flex;\n  flex-direction: column;\n  justify-content: space-between;\n"]))),Pe=E.a.div(_e||(_e=Object(d.a)(["\n  background-color: #ffffff21;\n  margin-top: 14vh;\n  min-height: 72vh;\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: center;\n  font-size: 1.5rem;\n  color: black;\n"]))),Fe=E.a.footer(Te||(Te=Object(d.a)(["\n  font-size: 1.1em;\n  background: #f5f5f5;\n  color: #635d5d;\n  padding: 1rem 0;\n  p {\n    margin: 0;\n  }\n  a {\n    color: #909090;\n  }\n  a:hover {\n    color: #5a5858;\n  }\n"])));var Re=Object(h.b)((function(e){return{currentUserData:e.user.currentUserData}}),(function(e){return{setUser:function(a){e({type:"SET_USER",payload:a})},setLocation:function(a){e({type:"SET_LOCATION",payload:a})}}}))((function(e){var a=Object(r.useState)(!1),t=Object(m.a)(a,2),n=t[0],l=t[1];return Object(r.useEffect)((function(){(function(){var a=Object(u.a)(i.a.mark((function a(){var t;return i.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(!localStorage.userId){a.next=6;break}return a.next=3,b.a.get("https://nameless-wave-57808.herokuapp.com/api/v1/logged_in",{withCredentials:!0});case 3:t=a.sent,e.setLocation({coords:{latitude:localStorage.getItem("latitude"),longitude:localStorage.getItem("longitude")}}),e.setUser(t.data);case 6:case"end":return a.stop()}}),a)})));return function(){return a.apply(this,arguments)}})()(),l(!0)}),[]),s.a.createElement(De,null,n&&s.a.createElement(Ie,null,s.a.createElement(p.a,null,s.a.createElement("header",null,s.a.createElement(ae,null)),s.a.createElement(Pe,null,s.a.createElement(f.d,null,s.a.createElement(f.b,{exact:!0,path:"/"},s.a.createElement(He,null)),s.a.createElement(f.b,{exact:!0,path:"/signup"},s.a.createElement(M,null)),s.a.createElement(f.b,{exact:!0,path:"/login"},s.a.createElement(G,null)),s.a.createElement(f.b,{exact:!0,path:"/account"},s.a.createElement(q,null)),s.a.createElement(f.b,{exact:!0,path:"/update-account"},s.a.createElement(D,null)),s.a.createElement(f.b,{exact:!0,path:"/trailsearch"},s.a.createElement(Se,null)),s.a.createElement(f.b,{exact:!0,path:"/trails/:slug",component:ke}),s.a.createElement(f.b,{exact:!0,path:"/myhikes"},s.a.createElement(Ae,null)),s.a.createElement(f.b,{exact:!0,path:"/trails"},s.a.createElement(ie,null)))),s.a.createElement(Fe,{className:"subtext"},s.a.createElement("p",null,s.a.createElement("strong",null,"Trailblaze 2021")),s.a.createElement(v.a,{className:"justify-content-center"},s.a.createElement(p.b,{className:"nav-link navbar-link",to:"#"},"About"),s.a.createElement(p.b,{className:"nav-link navbar-link",to:"#"},"Contact"))))))})),ze=t(61);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var Ke=t(12),Ve={currentUserData:{},latitude:null,longitude:null};var Be=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ve,a=arguments.length>1?arguments[1]:void 0;switch(a.type){case"SET_USER":return Object(Ke.a)(Object(Ke.a)({},e),{},{currentUserData:a.payload});case"CLEAR_USER":return Object(Ke.a)(Object(Ke.a)({},e),{},{latitude:"",longitude:"",currentUserData:{}});case"SET_LOCATION":var t=a.payload.coords;return localStorage.latitude||(localStorage.latitude=t.latitude,localStorage.longitude=t.longitude),Object(Ke.a)(Object(Ke.a)({},e),{},{latitude:t.latitude,longitude:t.longitude});default:return e}},qe={distance:60,mileage:"Less than 3",difficulty:"",trails:[]};var We=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:qe,a=arguments.length>1?arguments[1]:void 0;switch(a.type){case"HANDLE_CHANGE":var t=Object.keys(a.payload)[0];return Object(Ke.a)(Object(Ke.a)({},e),{},Object(y.a)({},t,a.payload[t]));case"SET_TRAILS":return localStorage.removeItem("trails"),localStorage.trails=a.payload.map((function(e){return e.id})),Object(Ke.a)(Object(Ke.a)({},e),{},{trails:a.payload});default:return e}},Ze={trail:null,fromSearchPage:!1};var Ye=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ze,a=arguments.length>1?arguments[1]:void 0;switch(a.type){case"SET_TRAIL":return Object(Ke.a)(Object(Ke.a)({},e),{},{trail:a.payload});case"SET_PREVIOUS_PAGE":var t="trails"===a.payload.pathname.slice(1,7);return Object(Ke.a)(Object(Ke.a)({},e),{},{fromSearchPage:t});default:return e}},$e={hikes:[]};var Je=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:$e,a=arguments.length>1?arguments[1]:void 0;switch(a.type){case"SET_HIKES":return Object(Ke.a)(Object(Ke.a)({},e),{},{hikes:a.payload});default:return e}},Xe={flashMessage:!1,alert:"",messages:[],username:"",password:"",passwordConfirmation:"",email:""};var Qe=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Xe,a=arguments.length>1?arguments[1]:void 0;switch(a.type){case"SET_FLASH_MESSAGE":var t=a.payload,n=t.alert,r=t.messages;return Object(Ke.a)(Object(Ke.a)({},e),{},{flashMessage:!0,alert:n,messages:r});case"UNMOUNT_FLASH_MESSAGE":return Object(Ke.a)(Object(Ke.a)({},e),{},{flashMessage:!1,alert:"",messages:[]});case"HANDLE_CHANGE":var s=Object.keys(a.payload)[0];return Object(Ke.a)(Object(Ke.a)({},e),{},Object(y.a)({},s,a.payload[s]));default:return e}},ea=Object(ze.a)({user:Be,trailSearch:We,trailShow:Ye,myHikes:Je,form:Qe}),aa=Object(ze.b)(ea);b.a.defaults.xsrfCookieName="CSRF-TOKEN",b.a.defaults.xsrfHeaderName="X-CSRF-Token",b.a.defaults.withCredentials=!0,c.a.render(s.a.createElement(s.a.StrictMode,null,s.a.createElement(h.a,{store:aa},s.a.createElement(Re,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},80:function(e,a,t){e.exports=t(110)},85:function(e,a,t){}},[[80,1,2]]]);
//# sourceMappingURL=main.41a6df4c.chunk.js.map